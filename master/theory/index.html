
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Library of DSP functions for RF measurements">
      
      
        <meta name="author" content="Analog Devices, Inc.">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.1, mkdocs-material-8.5.6">
    
    
      
        <title>Usage Model - genalyzer</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#usage-model" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="genalyzer" class="md-header__button md-logo" aria-label="genalyzer" data-md-component="logo">
      
  <img src="../assets/wave-square-solid.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            genalyzer
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Usage Model
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/analogdevicesinc/genalyzer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="genalyzer" class="md-nav__button md-logo" aria-label="genalyzer" data-md-component="logo">
      
  <img src="../assets/wave-square-solid.svg" alt="logo">

    </a>
    genalyzer
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/analogdevicesinc/genalyzer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../setup/" class="md-nav__link">
        Set Up
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Usage Model
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Usage Model
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-configuration" class="md-nav__link">
    Test Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#waveform-generation" class="md-nav__link">
    Waveform Generation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-metric-computation" class="md-nav__link">
    Performance Metric Computation
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cgenalyzer_8h/" class="md-nav__link">
        API Reference
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sim/" class="md-nav__link">
        Simulation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hw/" class="md-nav__link">
        Hardware
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-configuration" class="md-nav__link">
    Test Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#waveform-generation" class="md-nav__link">
    Waveform Generation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-metric-computation" class="md-nav__link">
    Performance Metric Computation
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/analogdevicesinc/genalyzer/edit/master/docs/theory.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="usage-model">Usage Model</h1>
<h2 id="overview">Overview</h2>
<p>Within Genalyzer, bindings to the C++ library are provided to enable users to write C-, Python-, or MATLAB-based scripts to compute the desired performance metrics. In all three cases, the overall structure of a script that links to genalyzer is similar, as shown in more detail in the next subsection. The overall structure in a simulation-only scenario consists of three stages:</p>
<ul>
<li>Configure test</li>
<li>Generate waveform</li>
<li>Compute metric</li>
</ul>
<p>In the scenario where either the ADC codes or the FFT of the captured ADC codes are available, the structure would be </p>
<ul>
<li>Configure test</li>
<li>Load waveform</li>
<li>Compute metric</li>
</ul>
<p>In other words, only the second step would change. </p>
<p>The overall structure of a C-example that utilizes genalyzer library in the first scenario is shown by the following example.
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;cgenalyzer.h&quot;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">  </span><span class="c1">// opaque config struct that will contain config settings</span>
<span class="w">  </span><span class="n">gn_config</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w">  </span>

<span class="w">  </span><span class="c1">// configure test</span>
<span class="w">  </span><span class="n">err_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gn_config_gen_tone</span><span class="p">(...,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">err_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gn_config_quantize</span><span class="p">(...,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// generate waveform and quantize</span>
<span class="w">  </span><span class="n">err_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gn_gen_real_tone</span><span class="p">(...,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">err_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gn_quantize</span><span class="p">(...,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// compute metrics</span>
<span class="w">  </span><span class="n">err_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gn_get_fa_single_result</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sfdr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sfdr&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">...,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// free memory</span>
<span class="w">  </span><span class="n">gn_config_free</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
As shown in this (incomplete) illustrative example, a configuration struct is passed to various stages without having to pass the same relevant parameters over and over. </p>
<p>The overall structure of a C-example in the second scenario is shown by the following example.
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;cgenalyzer.h&quot;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">  </span><span class="c1">// opaque config struct that will contain config settings</span>
<span class="w">  </span><span class="n">gn_config</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w">  </span>

<span class="w">  </span><span class="c1">// configure test</span>
<span class="w">  </span><span class="n">err_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gn_config_fft</span><span class="p">(...,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// read ADC codes from file</span>
<span class="w">  </span><span class="n">err_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read_array_from_json_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;adc_output_i&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">adc_i</span><span class="p">,</span><span class="w"> </span><span class="p">...);</span><span class="w"></span>
<span class="w">  </span><span class="n">err_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read_array_from_json_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;adc_output_q&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">adc_q</span><span class="p">,</span><span class="w"> </span><span class="p">...);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// compute FFT</span>
<span class="w">  </span><span class="n">err_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gn_fftz</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fft_out</span><span class="p">,</span><span class="w"> </span><span class="n">adc_i</span><span class="p">,</span><span class="w"> </span><span class="n">adc_q</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// compute metrics</span>
<span class="w">  </span><span class="n">err_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gn_get_fa_single_result</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sfdr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sfdr&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">fft_out</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// free memory</span>
<span class="w">  </span><span class="n">gn_config_free</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
If on the other hand, the FFT is pre-computed and genalyzer is expected to compute the desired performance metric alone, then only the configuration of FFT related parameters is needed in order for genalyzer to compute the desired performance metric. Note that in the following example, it is assumed that the FFT data is available in the form of a json file. It can be replaced by any other means of loading this data.
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;cgenalyzer.h&quot;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">  </span><span class="c1">// opaque config struct that will contain config settings</span>
<span class="w">  </span><span class="n">gn_config</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w">  </span>

<span class="w">  </span><span class="c1">// configuration</span>
<span class="w">  </span><span class="n">err_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gn_config_fft</span><span class="p">(...,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// read FFT of ADC codes from file</span>
<span class="w">  </span><span class="n">err_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read_array_from_json_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fft_test_vec&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">fft_out</span><span class="p">,</span><span class="w"> </span><span class="p">...);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// compute metrics</span>
<span class="w">  </span><span class="n">err_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gn_get_fa_single_result</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sfdr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sfdr&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">fft_out</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// free memory</span>
<span class="w">  </span><span class="n">gn_config_free</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
As highlighted by all three illustrative examples above, prior to configuring the test scenario, memory is allocated for the configuration struct by invoking, <tt>gn_config_calloc()</tt> and to free the allocated memory, <tt>gn_config_free()</tt> is called.</p>
<h2 id="test-configuration">Test Configuration</h2>
<p>As indicated previously, test configuration is driven through an opaque struct. The public members that are accessible to the user for the purpose of specifying either the waveform or the FFT or the analysis settings are shown in the table below. </p>
<table>
<thead>
<tr>
<th align="center">Catgory</th>
<th align="center">Member Name</th>
<th align="center">Datatype</th>
<th align="center">Description</th>
<th align="center">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>Waveform and FFT settings</strong></td>
<td align="center"><tt>ttype</tt></td>
<td align="center">ENUM</td>
<td align="center">Tone type</td>
<td align="center">Options:<br/> <tt>REAL_COSINE</tt><br/> <tt>REAL_SINE</tt><br/> <tt>COMPLEX_EXP</tt></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>npts</tt></td>
<td align="center">size_t</td>
<td align="center">Num. of sample points in the waveform</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>sample_rate</tt></td>
<td align="center">double</td>
<td align="center">Sample Rate</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>tone_freq</tt></td>
<td align="center">double*</td>
<td align="center">Tone frequency</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>tone_ampl</tt></td>
<td align="center">double*</td>
<td align="center">Tone amplitude</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>tone_phase</tt></td>
<td align="center">double*</td>
<td align="center">Tone phase</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>num_tones</tt></td>
<td align="center">size_t</td>
<td align="center">Num. of tones</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>fsr</tt></td>
<td align="center">double</td>
<td align="center">ADC full-scale range</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>qres</tt></td>
<td align="center">int</td>
<td align="center">Quantization resolution</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>noise_rms</tt></td>
<td align="center">double</td>
<td align="center">Noise RMS value</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>code_format</tt></td>
<td align="center">ENUM</td>
<td align="center">Code format of ADC/DAC codes</td>
<td align="center">Options: <br/><tt>GnCodeFormatOffsetBinary</tt><br/> <tt>GnCodeFormatTwosComplement</tt></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>nfft</tt></td>
<td align="center">size_t</td>
<td align="center">FFT order</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>fft_navg</tt></td>
<td align="center">size_t</td>
<td align="center">Num. of FFT averages</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>data_rate</tt></td>
<td align="center">double</td>
<td align="center">Data rate</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>shift_freq</tt></td>
<td align="center">double</td>
<td align="center">Shift frequency</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>win</tt></td>
<td align="center">ENUM</td>
<td align="center">Window function</td>
<td align="center">Options: <br/><tt>GnWindowBlackmanHarris</tt><br/> <tt>GnWindowHann</tt><br/> <tt>GnWindowNoWindow</tt></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>ramp_start</tt></td>
<td align="center">double</td>
<td align="center">Start value of ramp</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>ramp_stop</tt></td>
<td align="center">double</td>
<td align="center">Stop value of ramp</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>Fourier analysis settings</strong></td>
<td align="center"><tt>obj_key</tt></td>
<td align="center">char*</td>
<td align="center">Object key</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>comp_key</tt></td>
<td align="center">char*</td>
<td align="center">Component key</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>ssb_fund</tt></td>
<td align="center">int</td>
<td align="center">Single side bin - Fundamental</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>ssb_rest</tt></td>
<td align="center">int</td>
<td align="center">Single side bin - Others</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>max_harm_order</tt></td>
<td align="center">int</td>
<td align="center">Max. order of harmonic</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>NL analysis settings</strong></td>
<td align="center"><tt>dnla_signal_type</tt></td>
<td align="center">ENUM</td>
<td align="center">DNL analysis signal type</td>
<td align="center">Options: <br/><tt>GnDnlSignalRamp</tt><br/> <tt>GnDnlSignalTone</tt></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><tt>inla_fit</tt></td>
<td align="center">ENUM</td>
<td align="center">INL analysis fit</td>
<td align="center">Options: <br/><tt>GnInlLineFitBestFit</tt> <br/><tt>GnInlLineFitEndFit</tt> <br/><tt>GnInlLineFitNoFit</tt></td>
</tr>
</tbody>
</table>
<p>As shown by this table, not all parameters are necessary in all use-cases. Consequently, each of the above <tt>struct</tt> members are accessible through <tt>gn_config_set_*</tt> functions. For instance, in order to configure sample rate, the function, <tt>gn_config_set_sample_rate</tt> would be used. Similarly for the other struct members. Additionally, the functions, <tt>gn_config_gen_tone</tt>, <tt>gn_config_gen_ramp</tt>, <tt>gn_config_quantize</tt>, <tt>gn_config_fft</tt>, and <tt>gn_config_fa</tt> can be used to configure a set of parameters that are needed in certain specific use-cases. Further details on the function signatures for each of these configuration functions can be found on the API reference page.</p>
<p>The following table describes a few use-cases and the relevant members of the configuration struct that need to be set in order to generate a waveform or to perform the desired analysis using genalyzer.</p>
<table>
<thead>
<tr>
<th align="center">Use-case</th>
<th align="left"><tt>gn_config</tt> members to configure</th>
<th align="center">Pre-requite function call</th>
<th align="center">Function call</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Generate single-/multi-tone waveform</td>
<td align="left"><ul><li><tt>ttype</tt></li><li><tt>npts</tt></li><li><tt>sample_rate</tt></li><li><tt>num_tones</tt></li><li><tt>tone_freq</tt></li><li><tt>tone_ampl</tt></li><li><tt>tone_phase</tt></li></ul></td>
<td align="center"><tt>gn_config_gen_tone()</tt></td>
<td align="center"><tt>gn_gen_tone()</tt></td>
</tr>
<tr>
<td align="center">Generate ramp waveform</td>
<td align="left"><ul><li><tt>npts</tt></li><li><tt>ramp_start</tt></li><li><tt>ramp_stop</tt></li></ul></td>
<td align="center"><tt>gn_config_gen_ramp()</tt><sup>1</sup></td>
<td align="center"><tt>gn_gen_ramp()</tt></td>
</tr>
<tr>
<td align="center">Quantize waveform</td>
<td align="left"><ul><li><tt>npts</tt></li><li><tt>fsr</tt></li><li><tt>qres</tt></li><li><tt>noise_rms</tt></li></ul></td>
<td align="center"><tt>gn_config_quantize()</tt><sup>2</sup></td>
<td align="center"><tt>gn_quantize()</tt></td>
</tr>
<tr>
<td align="center">Compute FFT</td>
<td align="left"><ul><li><tt>npts</tt></li><li><tt>qres</tt></li><li><tt>fft_navg</tt></li><li><tt>nfft</tt></li><li><tt>win</tt></li></ul></td>
<td align="center"><tt>gn_config_fft()</tt><sup>2</sup></td>
<td align="center"><tt>gn_fftz()</tt></td>
</tr>
<tr>
<td align="center">Compute histogram</td>
<td align="left"><ul><li><tt>npts</tt></li><li><tt>qres</tt></li></ul></td>
<td align="center"><tt>gn_config_histz_nla()</tt><sup>2</sup></td>
<td align="center"><tt>gn_histz()</tt></td>
</tr>
<tr>
<td align="center">Compute DNL</td>
<td align="left"><ul><li><tt>npts</tt></li><li><tt>qres</tt></li></ul></td>
<td align="center"><tt>gn_config_histz_nla()</tt><sup>2</sup></td>
<td align="center"><tt>gn_dnlz()</tt></td>
</tr>
<tr>
<td align="center">Compute INL</td>
<td align="left"><ul><li><tt>npts</tt></li><li><tt>qres</tt></li></ul></td>
<td align="center"><tt>gn_config_histz_nla()</tt><sup>2,</sup><sup>3</sup></td>
<td align="center"><tt>gn_inlz()</tt></td>
</tr>
<tr>
<td align="center">Do Fourier analysis</td>
<td align="left"><ul><li><tt>nfft</tt></li></ul></td>
<td align="center"><tt>gn_config_fa()</tt><sup>4</sup></td>
<td align="center"><tt>gn_get_fa_single_result()</tt> <br/>or<br/> <tt>gn_get_fa_results()</tt></td>
</tr>
<tr>
<td align="center">Do waveform analysis</td>
<td align="left"><ul><li><tt>npts</tt></li></ul></td>
<td align="center"><tt>gn_config_set_npts()</tt></td>
<td align="center"><tt>gn_get_wfa_results()</tt></td>
</tr>
<tr>
<td align="center">Do histogram analysis</td>
<td align="left"><ul><li><tt>npts</tt></li><li><tt>qres</tt></li></ul></td>
<td align="center"><tt>gn_config_histz_nla()</tt><sup>2</sup></td>
<td align="center"><tt>gn_get_ha_results()</tt></td>
</tr>
<tr>
<td align="center">Do DNL analysis</td>
<td align="left"><ul><li><tt>npts</tt></li><li><tt>qres</tt></li></ul></td>
<td align="center"><tt>gn_config_histz_nla()</tt><sup>2</sup></td>
<td align="center"><tt>gn_get_dnla_results()</tt></td>
</tr>
<tr>
<td align="center">Do INL analysis</td>
<td align="left"><ul><li><tt>npts</tt></li><li><tt>qres</tt></li></ul></td>
<td align="center"><tt>gn_config_histz_nla()</tt><sup>2</sup></td>
<td align="center"><tt>gn_get_inla_results()</tt></td>
</tr>
</tbody>
</table>
<p><sup>1</sup><tt>noise_rms=0.0</tt> is used. It can be overridden by calling <tt>gn_config_set_noise_rms()</tt> prior to calling <tt>gn_gen_ramp()</tt>.</p>
<p><sup>2</sup><tt>code_format=GnCodeFormatTwosComplement</tt> is used. It can be overridden by calling <tt>gn_config_set_code_format()</tt> prior to calling the corresponding pre-requisite function call.</p>
<p><sup>3</sup><tt>inla_fit=GnInlLineFitBestFit</tt> is used. It can be overridden by calling <tt>gn_config_set_inla_fit()</tt> prior to calling <tt>gn_config_histz_nla()</tt>.</p>
<p><sup>4</sup>The following default settings are used.<ul><li><tt>ssb_fund = 0</tt></li><li><tt>ssb_rest = 0</tt></li><li><tt>max_harm_order = 3</tt></li><li><tt>axis_type=GnFreqAxisTypeDcCenter</tt></li></ul> They can be overridden by calling <tt>gn_config_set_ssb_fund()</tt>, <tt>gn_config_set_ssb_rest()</tt>, <tt>gn_config_set_max_harm_order()</tt>, <tt>gn_config_set_axis_type()</tt> prior to calling <tt>gn_get_fa_results()</tt> or <tt>gn_get_fa_single_result()</tt>.</p>
<p>Note that for certain use-cases, the pre-requisite function calls need not be invoked. For instance, given an analog waveform, if the user intends to quantize it and then compute the histogram, calling <tt>gn_config_quantize()</tt> will set the <tt>gn_config</tt> struct parameters needed prior to invoking <tt>gn_histz()</tt>.</p>
<p>As indicated in the overall skelton C-script that interfaces with genalyzer, the first stage involves configuring an opaque struct that is provided to the users in order to describe the measurement scenario. Here, users can select between three <code>config_*_meas()</code> function calls in order to select between tone-, ramp- and noise-based performance metric calculations. The opaque struct maintains the state of the test scenario and is passed to the waveform generation and performance metric computation stages subsequently.</p>
<p><strong>Tone-based Test Configuration</strong><br />
In tone-based test configuration, <code>config_tone_meas()</code> allows users to indicate test settings such as, number of tones, their frequencies, phases, scales, whether real sinusoidal or complex-exponential waveforms are to be generated, the sample-rate, full-scale range of the converter, its resolution etc. Similarly, users can indicate whether the data that will be loaded in the second stage is time-series data or interleaved FFT samples. Moreover, in data-capture scenario i.e., when FFT data is provided to Genalyzer in the second step, the tone frequency, scale and phase information is not required. This test configuration is used for measurements such as SFDR, THD, TIL etc.</p>
<p>An example of the <code>config_tone_meas()</code> function call is shown by the following example.
<div class="highlight"><pre><span></span><code><span class="c1">// configuration</span>
<span class="n">config_tone_meas</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">domain_wf</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">type_wf</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">nfft</span><span class="p">,</span><span class="w"> </span><span class="c1">// FFT order</span>
<span class="w">                </span><span class="n">navg</span><span class="p">,</span><span class="w"> </span><span class="c1">// # of FFTs averaged</span>
<span class="w">                </span><span class="n">fs</span><span class="p">,</span><span class="w"> </span><span class="c1">// sample rate</span>
<span class="w">                </span><span class="n">fsr</span><span class="p">,</span><span class="w"> </span><span class="c1">// full-scale range</span>
<span class="w">                </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="c1">// ADC resolution: unused configuration setting</span>
<span class="w">                </span><span class="n">freq</span><span class="p">,</span><span class="w"> </span><span class="c1">// tone frequency, # of array elements = num_tones</span>
<span class="w">                </span><span class="n">scale</span><span class="p">,</span><span class="w"> </span><span class="c1">// tone scale, # of array elements = num_tones</span>
<span class="w">                </span><span class="n">phase</span><span class="p">,</span><span class="w"> </span><span class="c1">// tone phase, # of array elements = num_tones</span>
<span class="w">                </span><span class="n">num_tones</span><span class="p">,</span><span class="w"> </span><span class="c1">// # of tones</span>
<span class="w">                </span><span class="nb">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nb">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nb">false</span><span class="w"></span>
<span class="w">                </span><span class="p">);</span><span class="w"></span>
</code></pre></div></p>
<p><strong>Ramp-based Test Configuration</strong><br />
In ramp-based test configuration, <code>config_ramp_meas()</code> allows users to indicate test settings such as, the starting and ending values of the ramp waveform in addition to the full-scale range and the resolution of the data converter under test. This test configuration is primarily used in non-linearity based measurements.</p>
<p>An example of the <code>config_ramp_meas()</code> function call is shown by the following example.
<div class="highlight"><pre><span></span><code><span class="c1">// configuration</span>
<span class="n">config_ramp_nl_meas</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="n">npts</span><span class="p">,</span><span class="w"> </span><span class="c1">// # of data points</span>
<span class="w">                    </span><span class="n">fs</span><span class="p">,</span><span class="w"> </span><span class="c1">// sample rate</span>
<span class="w">                    </span><span class="n">fsr</span><span class="p">,</span><span class="w"> </span><span class="c1">// full-scale range</span>
<span class="w">                    </span><span class="n">res</span><span class="p">,</span><span class="w"> </span><span class="c1">// ADC resolution: unused configuration setting</span>
<span class="w">                    </span><span class="n">start</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="n">stop</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="mf">0.0</span><span class="w"></span>
<span class="w">                    </span><span class="p">);</span><span class="w"></span>
</code></pre></div></p>
<p><strong>Noise-based Test Configuration</strong><br/>
In noise-based test configuration, <code>config_noise_meas()</code> allows users to indicate test settings such as, the noise power level in addition to the full-scale range and the resolution of the data converter under test. This test configuration is primarily used for computing noise spectral density. </p>
<p>An example of the <code>config_noise_meas()</code> function call is shown by the following example.
<div class="highlight"><pre><span></span><code><span class="c1">// configuration</span>
<span class="n">config_noise_meas</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">COMPLEX_NOISE</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">nfft</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">navg</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">fs</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">fsr</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">res</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">noise_pwr_lvl</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">update_fsample</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">update_fdata</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">update_fshift</span><span class="p">);</span><span class="w"></span>
</code></pre></div></p>
<h2 id="waveform-generation">Waveform Generation</h2>
<p>The second step, as shown previously, involves either generating the waveform and quantizing it or loading the waveform from a file. The following options are currently supported.</p>
<ul>
<li>cosine/sine and complex exponential waveforms of arbitrary frequency and sample rate</li>
<li>ramp waveform</li>
<li>Gaussian noise waveform of desired noise power spectral density level</li>
</ul>
<p>In all three cases, the waveform generation functions take two arguments, the opaque configuration struct that has been populated in the first step and a double pointer that will contain the analog waveform generated. The subsequent call to <code>quantize()</code> takes the configuration struct, the analog input waveform and the output quantized waveform obtained from quantizeing the analog waveform based on the resolution contained in the configuration struct.</p>
<p>Alternatively, if data is loaded from a file, the configuration struct generated in the first stage will serve as a descriptor of that data. Note that indicating whether time or frequency data is loaded is indicated simply by an argument to the <code>config_tone_meas()</code> call in the first step.
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdbool.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;assert.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;genalyzer_cwrapper.h&quot;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">  </span><span class="c1">// opaque config struct that will contain config settings</span>
<span class="w">  </span><span class="c1">// config c = NULL;</span>

<span class="w">  </span><span class="cm">/* configuration */</span><span class="w"></span>
<span class="w">  </span><span class="c1">// config_tone_meas(&amp;c, FREQ, ...);</span>
<span class="w">  </span><span class="c1">// config_tone_meas(&amp;c, TIME,...);</span>

<span class="w">  </span><span class="cm">/* load waveform generation*/</span><span class="w"></span>
<span class="w">  </span><span class="c1">// read_file_to_array(...);</span>

<span class="w">  </span><span class="cm">/* compute metrics */</span><span class="w"></span>
<span class="w">  </span><span class="c1">// fsnr_val = metric(..., &quot;FSNR&quot;);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<h2 id="performance-metric-computation">Performance Metric Computation</h2>
<p>The final stage involves simply computing the desired performance metric. Metric computation is done by a call to <code>metric()</code> where, the last argument is one of: </p>
<ul>
<li><code>"FSNR"</code></li>
<li><code>"NSD"</code></li>
<li><code>"SFDR"</code></li>
<li><code>"SINAD"</code></li>
<li><code>"SNR"</code></li>
<li><code>"TD"</code></li>
<li><code>"THD"</code></li>
<li><code>"TIL</code></li>
</ul>
<p>Again, the test configuration contained in the opaque struct obtained from the first step is helpful in determinging whether the </p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../setup/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Set Up" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Set Up
            </div>
          </div>
        </a>
      
      
        
        <a href="../examples/" class="md-footer__link md-footer__link--next" aria-label="Next: Examples" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Examples
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>